DROP SCHEMA IF EXISTS BANCO;
CREATE SCHEMA BANCO;
USE BANCO;

#TITULAR (DNI, DOMICILIO, TELÉFONO)

CREATE TABLE TITULAR(
	DNI CHAR(9) PRIMARY KEY,
    DOMICILIO VARCHAR(50),
    TELEFONO VARCHAR(15)    
);

#CUENTA (NÚMERO, SALDO, FECHA_APERTURA)

CREATE TABLE CUENTA(
	NUMERO CHAR(24) PRIMARY KEY,
    SALDO DECIMAL(9, 2),
    FECHA_APERTURA DATE
);

#TARJETA (NÚMERO, TIPO, DNI_TITULAR, NUMERO_CUENTA)

CREATE TABLE TARJETA(
	NUMERO CHAR(16) PRIMARY KEY,
    TIPO VARCHAR(20),
    DNI_TITULAR CHAR(9),
    NUMERO_CUENTA CHAR(24),
    
    FOREIGN KEY (DNI_TITULAR) REFERENCES TITULAR(DNI),
    FOREIGN KEY (NUMERO_CUENTA) REFERENCES CUENTA(NUMERO)
);

#TITULAR_DISPONE_CUENTA (DNI_TITULAR, NUMERO_CUENTA)

CREATE TABLE TITULAR_DISPONE_CUENTA(
	DNI_TITULAR CHAR(9),
    NUMERO_CUENTA CHAR(24),
    
    PRIMARY KEY (DNI_TITULAR, NUMERO_CUENTA),
    FOREIGN KEY (DNI_TITULAR) REFERENCES TITULAR(DNI),
    FOREIGN KEY (NUMERO_CUENTA) REFERENCES CUENTA(NUMERO)
);

# CREA UNA CUENTA CON TRES TITULARES Y QUE DOS DE ELLOS TENGAN UNA TARJETA DE CRÉDITO
# ADEMÁS, UNO DE LOS TITULARES TENDRÁ UNA CUENTA PROPIA Y OTRA TARJETA DE CRÉDITO

INSERT INTO TITULAR VALUES
("12345678H", "CALLE PIRULETA", "655865472"),
("56347868H", "CALLE PIRULETA", "655865472"),
("77344678H", "CALLE PIRULETA", "655865472");

INSERT INTO CUENTA VALUES
("1234567899", 10.56, "2023-05-30"),
("7894567899", 10.56, "2023-05-15");

INSERT INTO TITULAR_DISPONE_CUENTA VALUES
("12345678H", "1234567899"),
("12345678H", "7894567899"),
("56347868H", "1234567899"),
("77344678H", "1234567899");

#TARJETA (NÚMERO, TIPO, DNI_TITULAR, NUMERO_CUENTA)
INSERT INTO TARJETA VALUES
("555569874578", "CRÉDITO", "12345678H", "1234567899"),
("785569874578", "CRÉDITO", "12345678H", "7894567899"),
("896569874578", "CRÉDITO", "56347868H", "1234567899");

SELECT * FROM TARJETA;











